# Enhance role prompts for better differentiation
file_path = 'C:/Projects/SheetGPT/chrome-extension/src/sidebar.html'
with open(file_path, 'r', encoding='utf-8') as f:
    content = f.read()

old_prompts = '''    const presetPrompts = {
      analyst: `Я аналитик данных. Работаю с KPI, метриками, трендами и визуализацией. Помогай строить сводные таблицы, выявлять аномалии, рассчитывать статистику и делать выводы на основе данных.`,
      accountant: `Я бухгалтер. Работаю с финансовой отчётностью, расчётами налогов, сверками и балансами. Помогай с формулами для расчёта НДС, прибыли, амортизации и формированием отчётов.`,
      marketer: `Я маркетолог. Работаю с данными рекламных кампаний, конверсий, ROI и воронок продаж. Помогай анализировать эффективность каналов, считать CAC, LTV и оптимизировать бюджеты.`,
      sales: `Я менеджер по продажам. Работаю с CRM-данными, сделками, планами и клиентской базой. Помогай отслеживать воронку, считать конверсии этапов, прогнозировать выполнение плана.`,
      hr: `Я HR-специалист. Работаю с данными сотрудников, зарплатами, отпусками и наймом. Помогай анализировать текучку, считать ФОТ, формировать отчёты по персоналу.`,
      logistics: `Я логист. Работаю с данными склада, доставки, маршрутов и запасов. Помогай анализировать оборачиваемость, оптимизировать остатки, отслеживать сроки поставок.`
    };'''

new_prompts = '''    const presetPrompts = {
      analyst: `Я аналитик данных. Моя работа: KPI, метрики, тренды, визуализация.
ПРИОРИТЕТЫ: сводные таблицы, выявление аномалий, статистика, data-driven выводы.
ТЕРМИНОЛОГИЯ: медиана, среднее, отклонение, корреляция, тренд, динамика, YoY, MoM.
При анализе ВСЕГДА показывай: ключевые метрики, сравнение с прошлым периодом, аномалии.`,

      accountant: `Я бухгалтер. Моя работа: финансовая отчётность, налоги, сверки, балансы.
ПРИОРИТЕТЫ: точность расчётов, соответствие стандартам, формирование отчётов.
ТЕРМИНОЛОГИЯ: НДС (20%), налог на прибыль, амортизация, дебет/кредит, сальдо, оборот.
ФОРМУЛЫ: используй ОКРУГЛ, СУММЕСЛИ, ВПР. Всегда округляй до копеек (2 знака).`,

      marketer: `Я маркетолог. Моя работа: рекламные кампании, конверсии, ROI, воронки.
ПРИОРИТЕТЫ: эффективность каналов, оптимизация бюджета, рост конверсий.
ТЕРМИНОЛОГИЯ: CTR, CPC, CPM, CPA, CAC, LTV, ROAS, CR, охват, частота.
При анализе СЧИТАЙ: ROI = (доход - расход) / расход * 100%, LTV/CAC ratio.`,

      sales: `Я менеджер по продажам. Моя работа: CRM, сделки, планы, клиенты.
ПРИОРИТЕТЫ: выполнение плана, конверсия воронки, прогноз продаж.
ТЕРМИНОЛОГИЯ: лид, сделка, воронка, этап, конверсия, средний чек, win rate.
При анализе ПОКАЗЫВАЙ: % выполнения плана, топ клиентов, узкие места воронки.`,

      hr: `Я HR-специалист. Моя работа: сотрудники, зарплаты, отпуска, найм.
ПРИОРИТЕТЫ: ФОТ, текучка кадров, укомплектованность, эффективность найма.
ТЕРМИНОЛОГИЯ: ФОТ, текучка %, time-to-hire, cost-per-hire, retention rate.
При анализе СЧИТАЙ: текучка = уволенные / среднесписочная * 100%.`,

      logistics: `Я логист. Моя работа: склад, доставка, маршруты, запасы.
ПРИОРИТЕТЫ: оборачиваемость, оптимизация остатков, сроки поставок.
ТЕРМИНОЛОГИЯ: SKU, оборачиваемость, страховой запас, lead time, ABC-анализ.
При анализе ПОКАЗЫВАЙ: дни оборачиваемости, неликвиды, дефицит, ABC-группы.`
    };'''

if old_prompts in content:
    content = content.replace(old_prompts, new_prompts)
    with open(file_path, 'w', encoding='utf-8') as f:
        f.write(content)
    print('SUCCESS: Enhanced role prompts')
else:
    print('ERROR: Prompts not found')
