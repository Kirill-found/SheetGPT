#!/usr/bin/env python3
"""
100+ —Ç–µ—Å—Ç–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–û–ô —Ç–æ—á–Ω–æ—Å—Ç–∏ SheetGPT
–¶–µ–ª—å: –¥–æ—Å—Ç–∏—á—å 95-99% —Ç–æ—á–Ω–æ—Å—Ç–∏ –Ω–∞ –õ–Æ–ë–´–• –∑–∞–ø—Ä–æ—Å–∞—Ö
"""

# –¢–ï–°–¢–û–í–´–ï –ó–ê–ü–†–û–°–´ –ü–û –ö–ê–¢–ï–ì–û–†–ò–Ø–ú

AGGREGATION_QUERIES = [
    "–¢–æ–ø 3 —Ç–æ–≤–∞—Ä–∞ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º",
    "–¢–æ–ø 5 —Ç–æ–≤–∞—Ä–æ–≤ –ø–æ –æ–±—ä–µ–º—É",
    "–£ –∫–∞–∫–æ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –ø—Ä–æ–¥–∞–∂",
    "–ö–∞–∫–æ–π —Ç–æ–≤–∞—Ä –ø—Ä–æ–¥–∞–µ—Ç—Å—è –ª—É—á—à–µ –≤—Å–µ–≥–æ",
    "–ù–∞–π–¥–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–¥–∞–∂–∞–º–∏",
    "–ü–æ–∫–∞–∂–∏ —Ç–æ–ø 10 —Ç–æ–≤–∞—Ä–æ–≤",
    "–ö–∞–∫–∏–µ 3 –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –ª–∏–¥–∏—Ä—É—é—Ç –ø–æ –≤—ã—Ä—É—á–∫–µ",
    "–°–∞–º—ã–π –ø—Ä–∏–±—ã–ª—å–Ω—ã–π —Ç–æ–≤–∞—Ä",
    "–¢–æ–≤–∞—Ä —Å –Ω–∞–∏–º–µ–Ω—å—à–∏–º–∏ –ø—Ä–æ–¥–∞–∂–∞–º–∏",
    "–ü–æ—Å—Ç–∞–≤—â–∏–∫ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –æ–±—ä–µ–º–æ–º –ø–æ—Å—Ç–∞–≤–æ–∫"
]

FILTERING_QUERIES = [
    "–ü–æ–∫–∞–∂–∏ —Ç–æ–≤–∞—Ä—ã –¥–æ—Ä–æ–∂–µ 5000",
    "–ù–∞–π–¥–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ —Å –ø—Ä–æ–¥–∞–∂–∞–º–∏ –±–æ–ª—å—à–µ 100000",
    "–¢–æ–≤–∞—Ä—ã —Å –æ–±—ä–µ–º–æ–º –æ—Ç 1010 –¥–æ 1020",
    "–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ –û–û–û",
    "–¢–æ–≤–∞—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–¥–∞–ª–∏—Å—å –º–µ–Ω—å—à–µ —á–µ–º –Ω–∞ 50000",
    "–î–∞–Ω–Ω—ã–µ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π –º–µ—Å—è—Ü",
    "–¢–æ–≤–∞—Ä—ã —Å —Ü–µ–Ω–æ–π –Ω–∏–∂–µ —Å—Ä–µ–¥–Ω–µ–π",
    "–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ –∏–∑ –ú–æ—Å–∫–≤—ã",
    "–¢–æ–≤–∞—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞",
    "–ó–∞–∫–∞–∑—ã –±–æ–ª—å—à–µ 10 —à—Ç—É–∫"
]

CALCULATION_QUERIES = [
    "–ü–æ—Å—á–∏—Ç–∞–π –æ–±—â—É—é —Å—É–º–º—É –ø—Ä–æ–¥–∞–∂",
    "–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞",
    "–°–∫–æ–ª—å–∫–æ –≤—Å–µ–≥–æ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤",
    "–û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤",
    "–ú–µ–¥–∏–∞–Ω–Ω–∞—è —Ü–µ–Ω–∞",
    "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ —Ü–µ–Ω",
    "–ü—Ä–æ—Ü–µ–Ω—Ç —Ç–æ–≤–∞—Ä–æ–≤ –¥–æ—Ä–æ–∂–µ 10000",
    "–î–æ–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –û–û–û –í—Ä–µ–º—è –≤ –æ–±—â–∏—Ö –ø—Ä–æ–¥–∞–∂–∞—Ö",
    "–†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –∏ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π —Ü–µ–Ω–æ–π",
    "–°—Ä–µ–¥–Ω–∏–π –æ–±—ä–µ–º –∑–∞–∫–∞–∑–∞"
]

FORMULA_QUERIES = [
    "–°–æ–∑–¥–∞–π —Ñ–æ—Ä–º—É–ª—É –¥–ª—è —Å—É–º–º—ã –∫–æ–ª–æ–Ω–∫–∏ E",
    "–§–æ—Ä–º—É–ª–∞ –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –≤ –∫–æ–ª–æ–Ω–∫–µ A",
    "VLOOKUP –¥–ª—è –ø–æ–∏—Å–∫–∞ —Ü–µ–Ω—ã —Ç–æ–≤–∞—Ä–∞",
    "–§–æ—Ä–º—É–ª–∞ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —É—Å–ª–æ–≤–∏—é",
    "SUMIF –¥–ª—è —Å—É–º–º—ã –ø–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫—É",
    "–§–æ—Ä–º—É–ª–∞ —Å—Ä–µ–¥–Ω–µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è",
    "COUNTIF –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ —Ç–æ–≤–∞—Ä–æ–≤",
    "–§–æ—Ä–º—É–ª–∞ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –ø–æ —É–±—ã–≤–∞–Ω–∏—é",
    "INDEX MATCH –¥–ª—è –ø–æ–∏—Å–∫–∞",
    "–§–æ—Ä–º—É–ª–∞ –ø—Ä–æ—Ü–µ–Ω—Ç–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è"
]

ANALYTICAL_QUERIES = [
    "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –¥–∏–Ω–∞–º–∏–∫—É –ø—Ä–æ–¥–∞–∂",
    "–ù–∞–π–¥–∏ –∞–Ω–æ–º–∞–ª–∏–∏ –≤ –¥–∞–Ω–Ω—ã—Ö",
    "–ö–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã —Å—Ç–æ–∏—Ç –∑–∞–∫—É–ø–∞—Ç—å –±–æ–ª—å—à–µ",
    "–û—Ü–µ–Ω–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤",
    "–ù–∞–π–¥–∏ —Å–µ–∑–æ–Ω–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã",
    "–ö–∞–∫–∏–µ —Ç–æ–≤–∞—Ä—ã –ø—Ä–∏–Ω–æ—Å—è—Ç 80% –≤—ã—Ä—É—á–∫–∏",
    "–ö–æ—Ä—Ä–µ–ª—è—Ü–∏—è –º–µ–∂–¥—É —Ü–µ–Ω–æ–π –∏ –æ–±—ä–µ–º–æ–º",
    "–ü—Ä–æ–≥–Ω–æ–∑ –ø—Ä–æ–¥–∞–∂ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –º–µ—Å—è—Ü",
    "–ù–∞–π–¥–∏ —Ç–æ–≤–∞—Ä—ã —Å –Ω–∞–∏–±–æ–ª—å—à–µ–π –º–∞—Ä–∂–æ–π",
    "–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞ –¥–ª—è –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏–∏ –≤—ã—Ä—É—á–∫–∏"
]

COMPLEX_QUERIES = [
    "–¢–æ–ø 3 —Ç–æ–≤–∞—Ä–∞ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º —É –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –û–û–û –í—Ä–µ–º—è",
    "–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞ —Ç–æ–≤–∞—Ä–æ–≤ –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–¥–∞–ª–∏—Å—å –±–æ–ª—å—à–µ —á–µ–º –Ω–∞ 100000",
    "–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ —É –∫–æ—Ç–æ—Ä—ã—Ö –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –¥–æ—Ä–æ–∂–µ 5000",
    "–¢–æ–≤–∞—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ –µ—Å—Ç—å —É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤",
    "–ù–∞–π–¥–∏ —Ç–æ–≤–∞—Ä—ã —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –º–∞—Ä–∂–æ–π –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ—Å—Ç–∞–≤—â–∏–∫—É",
    "–°—Ä–∞–≤–Ω–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤ –ø–æ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—é —Ü–µ–Ω–∞/–æ–±—ä–µ–º",
    "–¢–æ–≤–∞—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ–¥–∞—é—Ç—Å—è –ª—É—á—à–µ —Å—Ä–µ–¥–Ω–µ–≥–æ —É —Å–≤–æ–µ–≥–æ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞",
    "–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ —Å —Ä–∞—Å—Ç—É—â–∏–º–∏ –ø—Ä–æ–¥–∞–∂–∞–º–∏",
    "–¢–æ–≤–∞—Ä—ã –∫–æ—Ç–æ—Ä—ã–µ —Å—Ç–æ–∏—Ç –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ –∞—Å—Å–æ—Ä—Ç–∏–º–µ–Ω—Ç–∞",
    "–û–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –Ω–∞–±–æ—Ä —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–±—ã–ª–∏"
]

MULTILINGUAL_QUERIES = [
    "Top 3 products by sales",
    "Find best supplier",
    "Calculate total revenue",
    "Show me expensive items",
    "Average price analysis",
    "„Éà„ÉÉ„Éó3„ÅÆË£ΩÂìÅ",  # Japanese
    "ÊúÄ‰Ω≥‰æõÂ∫îÂïÜ",  # Chinese
    "Meilleurs produits",  # French
    "Beste Produkte",  # German
    "Mejores productos"  # Spanish
]

EDGE_CASES = [
    "–∞",  # –û—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–π –∑–∞–ø—Ä–æ—Å
    "–ü–æ–∫–∞–∂–∏ –º–Ω–µ –∞–±—Å–æ–ª—é—Ç–Ω–æ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ –≤—Å–µ–º –∫–æ–ª–æ–Ω–∫–∞–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Å –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–æ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π",  # –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–π
    "—Ç–æ–ø -5 —Ç–æ–≤–∞—Ä–æ–≤",  # –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–µ —á–∏—Å–ª–æ
    "–¢–æ–≤–∞—Ä 99999",  # –ù–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ç–æ–≤–∞—Ä
    "",  # –ü—É—Å—Ç–æ–π –∑–∞–ø—Ä–æ—Å
    "üòÄüéâüìä",  # –≠–º–æ–¥–∑–∏
    "SELECT * FROM table",  # SQL –∏–Ω—ä–µ–∫—Ü–∏—è
    "<script>alert('test')</script>",  # XSS –ø–æ–ø—ã—Ç–∫–∞
    "../../etc/passwd",  # Path traversal
    "–¢–æ–≤–∞—Ä'; DROP TABLE;--"  # SQL injection
]

# –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤
ALL_QUERIES = (
    AGGREGATION_QUERIES +
    FILTERING_QUERIES +
    CALCULATION_QUERIES +
    FORMULA_QUERIES +
    ANALYTICAL_QUERIES +
    COMPLEX_QUERIES +
    MULTILINGUAL_QUERIES +
    EDGE_CASES
)

def test_universal_accuracy(api_url="https://sheetgpt-production.up.railway.app"):
    """
    –¢–µ—Å—Ç–∏—Ä—É–µ—Ç —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—É—é —Ç–æ—á–Ω–æ—Å—Ç—å API
    """
    import requests
    import json
    from datetime import datetime

    # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    test_data = {
        "column_names": ["–ö–æ–ª–æ–Ω–∫–∞ A", "–ö–æ–ª–æ–Ω–∫–∞ B", "–ö–æ–ª–æ–Ω–∫–∞ C", "–ö–æ–ª–æ–Ω–∫–∞ D", "–ö–æ–ª–æ–Ω–∫–∞ E"],
        "sheet_data": [
            ["–¢–æ–≤–∞—Ä 1", "–û–û–û –í—Ä–µ–º—è", 10730.32, 1010, 107303.2],
            ["–¢–æ–≤–∞—Ä 2", "–û–û–û –°–∞—Ç—É—Ä–Ω", 8568.37, 1030, 257051.1],
            ["–¢–æ–≤–∞—Ä 3", "–û–û–û –õ—É–Ω–∞", 7318.09, 1020, 146361.8],
            ["–¢–æ–≤–∞—Ä 14", "–û–û–û –í—Ä–µ–º—è", 6328.28, 1007, 44297.96],
            ["–¢–æ–≤–∞—Ä 5", "–û–û–û –ü–µ—Ä—Å–ø–µ–∫—Ç–∏–≤", 1196.9, 1017, 20347.3],
            ["–¢–æ–≤–∞—Ä 14", "–û–û–û –í—Ä–µ–º—è", 6328.28, 1023, 145550.44],
            ["–¢–æ–≤–∞—Ä 7", "–û–û–û –ö–æ—Å–º–æ—Å", 2499.28, 1012, 29991.36],
            ["–¢–æ–≤–∞—Ä 8", "–û–û–û –†–∞–¥–æ—Å—Ç—å", 25212.79, 1015, 378191.85],
            ["–¢–æ–≤–∞—Ä 14", "–û–û–û –í—Ä–µ–º—è", 6328.28, 1023, 145550.44],
            ["–¢–æ–≤–∞—Ä 10", "–ò–ü –†–∞–∑—É–º", 17789.22, 1010, 177892.2],
            ["–¢–æ–≤–∞—Ä 14", "–û–û–û –í—Ä–µ–º—è", 6328.28, 1015, 63282.8],
            ["–¢–æ–≤–∞—Ä 14", "–û–û–û –í—Ä–µ–º—è", 6328.28, 1025, 129076.72],
            ["–¢–æ–≤–∞—Ä 14", "–û–û–û –í—Ä–µ–º—è", 6328.28, 1022, 60771.44],
        ],
        "history": []
    }

    results = {
        "total": len(ALL_QUERIES),
        "successful": 0,
        "failed": 0,
        "errors": [],
        "slow_queries": [],
        "low_confidence": []
    }

    print(f"="*60)
    print(f"–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –£–ù–ò–í–ï–†–°–ê–õ–¨–ù–û–ô –¢–û–ß–ù–û–°–¢–ò")
    print(f"–í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: {len(ALL_QUERIES)}")
    print(f"–¶–µ–ª—å: 95-99% —É—Å–ø–µ—à–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤")
    print(f"="*60)

    for i, query in enumerate(ALL_QUERIES, 1):
        try:
            payload = test_data.copy()
            payload["query"] = query

            start_time = datetime.now()
            response = requests.post(
                f"{api_url}/api/v1/formula",
                json=payload,
                timeout=10
            )
            duration = (datetime.now() - start_time).total_seconds()

            if response.status_code == 200:
                result = response.json()

                # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–∞
                if "error" in result:
                    results["failed"] += 1
                    results["errors"].append({
                        "query": query,
                        "error": result.get("error")
                    })
                    print(f"[{i}/{len(ALL_QUERIES)}] ‚ùå {query[:50]}")
                else:
                    results["successful"] += 1
                    confidence = result.get("confidence", 0)

                    if confidence < 0.8:
                        results["low_confidence"].append({
                            "query": query,
                            "confidence": confidence
                        })

                    if duration > 3:
                        results["slow_queries"].append({
                            "query": query,
                            "duration": duration
                        })

                    print(f"[{i}/{len(ALL_QUERIES)}] ‚úÖ {query[:50]} (conf: {confidence:.2f}, time: {duration:.2f}s)")
            else:
                results["failed"] += 1
                results["errors"].append({
                    "query": query,
                    "status": response.status_code
                })
                print(f"[{i}/{len(ALL_QUERIES)}] ‚ùå HTTP {response.status_code}: {query[:50]}")

        except Exception as e:
            results["failed"] += 1
            results["errors"].append({
                "query": query,
                "exception": str(e)
            })
            print(f"[{i}/{len(ALL_QUERIES)}] ‚ùå Exception: {query[:50]}")

    # –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
    accuracy = (results["successful"] / results["total"]) * 100

    print(f"\n{'='*60}")
    print(f"–†–ï–ó–£–õ–¨–¢–ê–¢–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø")
    print(f"{'='*60}")
    print(f"–¢–æ—á–Ω–æ—Å—Ç—å: {accuracy:.1f}%")
    print(f"–£—Å–ø–µ—à–Ω—ã—Ö: {results['successful']}/{results['total']}")
    print(f"–û—à–∏–±–æ–∫: {results['failed']}")
    print(f"–ú–µ–¥–ª–µ–Ω–Ω—ã—Ö (>3s): {len(results['slow_queries'])}")
    print(f"–ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å (<0.8): {len(results['low_confidence'])}")

    if accuracy >= 95:
        print(f"\n‚úÖ –¶–ï–õ–¨ –î–û–°–¢–ò–ì–ù–£–¢–ê! –¢–æ—á–Ω–æ—Å—Ç—å {accuracy:.1f}% >= 95%")
    else:
        print(f"\n‚ùå –¶–ï–õ–¨ –ù–ï –î–û–°–¢–ò–ì–ù–£–¢–ê! –¢–æ—á–Ω–æ—Å—Ç—å {accuracy:.1f}% < 95%")

    # –î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –æ–± –æ—à–∏–±–∫–∞—Ö
    if results["errors"]:
        print(f"\n{'='*60}")
        print(f"–î–ï–¢–ê–õ–ò –û–®–ò–ë–û–ö (–ø–µ—Ä–≤—ã–µ 10)")
        print(f"{'='*60}")
        for err in results["errors"][:10]:
            print(f"Query: {err['query'][:50]}")
            print(f"Error: {err.get('error', err.get('exception', err.get('status')))}")
            print("-"*40)

    return results

if __name__ == "__main__":
    results = test_universal_accuracy()

    # –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    with open("test_results.json", "w", encoding="utf-8") as f:
        json.dump(results, f, ensure_ascii=False, indent=2)

    print(f"\n–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ test_results.json")